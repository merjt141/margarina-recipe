(()=>{class e{constructor(e){this.jsonString1=JSON.stringify({action:"selectTable",data:JSON.stringify([{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"GRINDSTED PS 404",x_comen2:"",c_ingred:"P02",x_ingred:"Emulsif. Caliente1 TMG",x_unidad:"%",t_ingred:"1"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.8",x_comen1:"LECITINA DE SOYA",x_comen2:"",c_ingred:"P23",x_ingred:"Emulsif. Frío1 TMG",x_unidad:"%",t_ingred:"2"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"80",x_comen1:"HDHOJAL",x_comen2:"01-07-16.",c_ingred:"P01",x_ingred:"Grasa",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"13.94",x_comen1:"MICROFILTRADA",x_comen2:"",c_ingred:"P05",x_ingred:"Agua",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"3.99",x_comen1:"SOLUCION DE SAL AL 25%",x_comen2:"",c_ingred:"P06",x_ingred:"Salmuera",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.27",x_comen1:"AROMAS COLORANTES",x_comen2:"",c_ingred:"P08",x_ingred:"Ingrediente1 TPB",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"72",x_comen1:"","":"",c_ingred:"R01",x_ingred:"TMG_SP_TempNivelMedio",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"68",x_comen1:"","":"",c_ingred:"R02",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"5",x_comen1:"","":"",c_ingred:"R03",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"5",x_comen1:"","":"",c_ingred:"R04",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R05",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R06",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R07",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R08",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R09",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R10",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R11",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"100",x_comen1:"","":"",c_ingred:"R12",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R13",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R14",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R15",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1.8",x_comen1:"","":"",c_ingred:"R16",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.3",x_comen1:"","":"",c_ingred:"R17",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.6",x_comen1:"","":"",c_ingred:"R18",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"58",x_comen1:"","":"",c_ingred:"R19",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"58",x_comen1:"","":"",c_ingred:"R20",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R21",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R22",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R23",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R24",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R25",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R26",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"500",x_comen1:"","":"",c_ingred:"R27",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.01",x_comen1:"","":"",c_ingred:"R28",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.2",x_comen1:"","":"",c_ingred:"R29",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R30",x_ingred:"",x_unidad:"%",t_ingred:"4"}])}),this.jsonString2=JSON.stringify({action:"selectTable",data:JSON.stringify([{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1.1",x_comen1:"GRINDSTED PS 404",x_comen2:"",c_ingred:"P02",x_ingred:"Emulsif. Caliente1 TMG",x_unidad:"%",t_ingred:"1"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.8",x_comen1:"LECITINA DE SOYA",x_comen2:"",c_ingred:"P23",x_ingred:"Emulsif. Frío1 TMG",x_unidad:"%",t_ingred:"2"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"80",x_comen1:"HDHOJAL",x_comen2:"01-07-16.",c_ingred:"P01",x_ingred:"Grasa",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"13.94",x_comen1:"MICROFILTRADA",x_comen2:"",c_ingred:"P05",x_ingred:"Agua",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"3.99",x_comen1:"SOLUCION DE SAL AL 25%",x_comen2:"",c_ingred:"P06",x_ingred:"Salmuera",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.27",x_comen1:"AROMAS COLORANTES",x_comen2:"",c_ingred:"P08",x_ingred:"Ingrediente1 TPB",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"72",x_comen1:"","":"",c_ingred:"R01",x_ingred:"TMG_SP_TempNivelMedio",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"68",x_comen1:"","":"",c_ingred:"R02",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"5",x_comen1:"","":"",c_ingred:"R03",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"5",x_comen1:"","":"",c_ingred:"R04",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R05",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R06",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R07",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R08",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R09",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R10",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R11",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"100",x_comen1:"","":"",c_ingred:"R12",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R13",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R14",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R15",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1.8",x_comen1:"","":"",c_ingred:"R16",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.3",x_comen1:"","":"",c_ingred:"R17",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.6",x_comen1:"","":"",c_ingred:"R18",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"58",x_comen1:"","":"",c_ingred:"R19",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"58",x_comen1:"","":"",c_ingred:"R20",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R21",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R22",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R23",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R24",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R25",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R26",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"500",x_comen1:"","":"",c_ingred:"R27",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.01",x_comen1:"","":"",c_ingred:"R28",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.2",x_comen1:"","":"",c_ingred:"R29",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R30",x_ingred:"",x_unidad:"%",t_ingred:"4"}])}),this.jsonString3=JSON.stringify({action:"selectTable",data:JSON.stringify([{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1.1",x_comen1:"GRINDSTED PS 404",x_comen2:"",c_ingred:"P02",x_ingred:"Emulsif. Caliente1 TMG",x_unidad:"%",t_ingred:"1"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1.8",x_comen1:"LECITINA DE SOYA",x_comen2:"",c_ingred:"P23",x_ingred:"Emulsif. Frío1 TMG",x_unidad:"%",t_ingred:"2"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1.4",x_comen1:"LECITINA",x_comen2:"",c_ingred:"P24",x_ingred:"Emulsif. Frío1 TMG",x_unidad:"%",t_ingred:"2"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"80",x_comen1:"HDHOJAL",x_comen2:"01-07-16.",c_ingred:"P01",x_ingred:"Grasa",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"13.94",x_comen1:"MICROFILTRADA",x_comen2:"",c_ingred:"P05",x_ingred:"Agua",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"3.99",x_comen1:"SOLUCION DE SAL AL 25%",x_comen2:"",c_ingred:"P06",x_ingred:"Salmuera",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.27",x_comen1:"AROMAS COLORANTES",x_comen2:"",c_ingred:"P08",x_ingred:"Ingrediente1 TPB",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"72",x_comen1:"","":"",c_ingred:"R01",x_ingred:"TMG_SP_TempNivelMedio",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"68",x_comen1:"","":"",c_ingred:"R02",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"5",x_comen1:"","":"",c_ingred:"R03",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"5",x_comen1:"","":"",c_ingred:"R04",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R05",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R06",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R07",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R08",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R09",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R10",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R11",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"100",x_comen1:"","":"",c_ingred:"R12",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R13",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R14",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R15",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1.8",x_comen1:"","":"",c_ingred:"R16",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.3",x_comen1:"","":"",c_ingred:"R17",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.6",x_comen1:"","":"",c_ingred:"R18",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"58",x_comen1:"","":"",c_ingred:"R19",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"58",x_comen1:"","":"",c_ingred:"R20",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R21",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R22",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R23",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R24",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R25",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R26",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"500",x_comen1:"","":"",c_ingred:"R27",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.01",x_comen1:"","":"",c_ingred:"R28",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.2",x_comen1:"","":"",c_ingred:"R29",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R30",x_ingred:"",x_unidad:"%",t_ingred:"4"}])}),this.jsonString4=JSON.stringify({action:"selectTable",data:JSON.stringify([{c_receta:"P16",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1.1",x_comen1:"GRINDSTED PS 404",x_comen2:"",c_ingred:"P02",x_ingred:"Emulsif. Caliente1 TMG",x_unidad:"%",t_ingred:"1"},{c_receta:"P16",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"3.1",x_comen1:"GRINDSTED PS 504",x_comen2:"",c_ingred:"P02",x_ingred:"Emulsif. Caliente1 TMG",x_unidad:"%",t_ingred:"1"},{c_receta:"P16",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1.8",x_comen1:"LECITINA DE SOYA",x_comen2:"",c_ingred:"P23",x_ingred:"Emulsif. Frío1 TMG",x_unidad:"%",t_ingred:"2"},{c_receta:"P16",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1.4",x_comen1:"LECITINA",x_comen2:"",c_ingred:"P24",x_ingred:"Emulsif. Frío1 TMG",x_unidad:"%",t_ingred:"2"},{c_receta:"P16",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.1",x_comen1:"LECITINA",x_comen2:"",c_ingred:"P24",x_ingred:"Emulsif. Frío1 TMG",x_unidad:"%",t_ingred:"2"},{c_receta:"P16",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"80",x_comen1:"HDHOJAL",x_comen2:"01-07-16.",c_ingred:"P01",x_ingred:"Grasa",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"13.94",x_comen1:"MICROFILTRADA",x_comen2:"",c_ingred:"P05",x_ingred:"Agua",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"3.99",x_comen1:"SOLUCION DE SAL AL 25%",x_comen2:"",c_ingred:"P06",x_ingred:"Salmuera",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.27",x_comen1:"AROMAS COLORANTES",x_comen2:"",c_ingred:"P08",x_ingred:"Ingrediente1 TPB",x_unidad:"%",t_ingred:"3"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"72",x_comen1:"","":"",c_ingred:"R01",x_ingred:"TMG_SP_TempNivelMedio",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"68",x_comen1:"","":"",c_ingred:"R02",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"5",x_comen1:"","":"",c_ingred:"R03",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"5",x_comen1:"","":"",c_ingred:"R04",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R05",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R06",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R07",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1",x_comen1:"","":"",c_ingred:"R08",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R09",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R10",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R11",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"100",x_comen1:"","":"",c_ingred:"R12",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R13",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R14",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R15",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"1.8",x_comen1:"","":"",c_ingred:"R16",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.3",x_comen1:"","":"",c_ingred:"R17",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.6",x_comen1:"","":"",c_ingred:"R18",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"58",x_comen1:"","":"",c_ingred:"R19",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"58",x_comen1:"","":"",c_ingred:"R20",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R21",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R22",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"",x_comen1:"","":"",c_ingred:"R23",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R24",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R25",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.5",x_comen1:"","":"",c_ingred:"R26",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"500",x_comen1:"","":"",c_ingred:"R27",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.01",x_comen1:"","":"",c_ingred:"R28",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.2",x_comen1:"","":"",c_ingred:"R29",x_ingred:"",x_unidad:"%",t_ingred:"4"},{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg.",n_valor:"0.05",x_comen1:"","":"",c_ingred:"R30",x_ingred:"",x_unidad:"%",t_ingred:"4"}])}),this.comboList=JSON.stringify({action:"selectCombo",data:JSON.stringify([{c_receta:"P01",x_receta:"P. HOJALDRE 2 Kg."},{c_receta:"P02",x_receta:"M. PRIMOR"},{c_receta:"P03",x_receta:"MARGARINA DEL."},{c_receta:"P04",x_receta:"1/2 MANT. ORGANICA"},{c_receta:"P16",x_receta:"1/2 MANT. ORGANICA NUEVO"}])}),this.object=e}executeQuery(e,n){switch(n){case"selectTable":let n="";switch(e.slice(269,272)){case"P01":n=this.jsonString1;break;case"P02":n=this.jsonString2;break;case"P03":n=this.jsonString3;break;case"P16":n=this.jsonString4}this.object.sqlAgent.response(this.object,n);break;case"selectCombo":this.object.sqlAgent.response(this.object,this.comboList);break;case"updateTable":break;case"duplicadoPeek":var r=JSON.stringify({action:"duplicadoPeek",data:JSON.stringify([])});this.object.sqlAgent.response(this.object,r);break;case"selectComboPeek":r=JSON.stringify({action:"selectComboPeek",data:JSON.stringify([{c_receta:"P15",x_receta:"Nueva Receta"}])}),this.object.sqlAgent.response(this.object,r);break;case"selectIngr":r=JSON.stringify({action:"selectIngr",data:JSON.stringify([{c_ingred:"C01",x_ingred:"Grasa"},{c_ingred:"C02",x_ingred:"Agua"},{c_ingred:"C03",x_ingred:"Salmuera"},{c_ingred:"C04",x_ingred:"Leche"},{c_ingred:"P01",x_ingred:"Grasa"},{c_ingred:"P02",x_ingred:"Emulsif. Caliente1 TMG"},{c_ingred:"P03",x_ingred:"Emulsif. Caliente2 TMG"},{c_ingred:"P04",x_ingred:"Emulsif. Caliente3 TMG"},{c_ingred:"P05",x_ingred:"Agua"}])}),this.object.sqlAgent.response(this.object,r)}}writePLC(e){console.log(e);var n,r,t=((e=JSON.parse(e)).action,e.data),i=[];for(n in t){var c=t[n];i.push(c.name)}for(r in console.log(i),t){var a="_"==(a=t[r]).name.slice(2,3)?a.value.toString():Number(a.value);console.log(a)}}}var n=function(e,n,r,t){return new(r=r||Promise)((function(i,c){function a(e){try{d(t.next(e))}catch(e){c(e)}}function _(e){try{d(t.throw(e))}catch(e){c(e)}}function d(e){var n;e.done?i(e.value):((n=e.value)instanceof r?n:new r((function(e){e(n)}))).then(a,_)}d((t=t.apply(e,n||[])).next())}))};class r{constructor(e,n){this.domId=e,this.object=n,this.selectedIndex="",this.domObject().addEventListener("change",(()=>{this.select()}))}domObject(){return document.getElementById(this.domId)}update(e){var n=JSON.parse("string"==typeof e?e:JSON.stringify(e));this.domObject().textContent="";for(let e=0;e<n.length;e++){var r=document.createElement("option");r.value=n[e].c_receta,r.innerHTML=n[e].x_receta,this.domObject().appendChild(r)}console.log(n),console.log("updated")}select(){return n(this,void 0,void 0,(function*(){this.selectedIndex=this.domObject().value;var e=(e=(e="Use ENV_MARG; select r.c_receta, r.x_receta, d.n_valor, d.x_comen1, d.x_comen2, i.c_ingred, i.x_ingred, i.x_unidad, i.t_ingred ")+"from RECETA r inner join DETALLE_RECETA d on r.c_receta = d.c_receta inner join INGREDIENTES i on d.c_ingred = i.c_ingred "+`where r.c_receta = '${this.selectedIndex}' order by c_ingred;`,this.object.sqlAgent.execute(this.object,e,"selectTable"),yield o(this.object.pid[1]));this.object.writeRecipeData(e)}))}}class t{constructor(){}execute(e,n,r){var t={action:r,data:n};console.log(t);try{WebCC.Events.fire("executeQuery",JSON.stringify(t),r)}catch(t){console.log("Not access to WebCC API: Go Simulation"),e.webCCSimulator.executeQuery(n,r)}}response(e,n){e.sqlQueryResponseHandler(n)}}class i{constructor(){}write(e,n,r){console.log(n);try{WebCC.Events.fire("writePLC",n,r)}catch(r){console.log("Not access to WebCC API"),e.webCCSimulator.writePLC(n)}}response(e,n){e.plcWriteResponseHandler(n)}}var c={tmg:{value:new Array(10),description:new Array(10),comment:new Array(10)},balanza:{value:new Array(17),description:new Array(17),comment:new Array(17)},parameters:new Array(30)};let a=[JSON.parse(JSON.stringify(c)),JSON.parse(JSON.stringify(c))];function _(e){return e.forEach(((e,n)=>isNaN(Number(e.value))?(alert("Los valores no son correctos"),!1):Number(e.value)<0?(alert("Los valores no pueden ser negativos"),!1):void 0)),1}function d(e){return document.getElementById(e)}function o(e){return n(this,void 0,void 0,(function*(){yield new Promise((n=>{let r=setInterval((()=>{e[0]&&(clearInterval(r),n())}),100)})),e[0]=!1;var n=e[1];return e[1]="",n}))}function g(e,r,t){return n(this,void 0,void 0,(function*(){r.sqlAgent.execute(r,`Use ENV_MARG; select x_receta, c_receta from RECETA where left(c_receta, 1) = '${e?"C":"P"}' order by c_receta;`,"selectCombo");var n=yield o(t);r.recipeComboBox.update(n)}))}var l=function(e,n,r,t){return new(r=r||Promise)((function(i,c){function a(e){try{d(t.next(e))}catch(e){c(e)}}function _(e){try{d(t.throw(e))}catch(e){c(e)}}function d(e){var n;e.done?i(e.value):((n=e.value)instanceof r?n:new r((function(e){e(n)}))).then(a,_)}d((t=t.apply(e,n||[])).next())}))};class s{constructor(){this.recipeJsonData=[[],[],[],[],[]],this.ingredientsHeadArray=["x_ingred","n_valor","x_unidad","x_comen1","x_comen2"],this.ingredientsDOM=[[],[]],this.parametersDOM=[],this.editionDisabled=!0,this.recipeInputList={editable:{tmg:[],balanza:[],ipsa:[],buttons:["button-modify-tmg","button-modify-balanza","button-modify-ipsa"]},resume:[["idCodeRecipe","sumatmg"],["itmg","icantidad","iunidad","idescripcion","sumabalanza"]]},this.sqlAgent=new t,this.plcAgent=new i,this.recipeComboBox=new r("cbRecipes",this),this.webCCSimulator=new e(this),this.copsa=!1,this.skipMessage=!1,this.refreshCalculation=!1,this.pid=[[!1,""],[!1,""],[!1,""],[!1,""],[!1,""],[!1,""],[!1,""],[!1,""]],this.formTransfer=null,this.formSaveAs=null,this.buildInputList()}sqlQueryResponseHandler(e){var n=JSON.parse(e);switch(n.action){case"selectCombo":this.pid[0][1]=n.data,this.pid[0][0]=!0;break;case"selectTable":this.pid[1][1]=n.data,this.pid[1][0]=!0;break;case"updateTable":console.log("Received update SQL confirmation");break;case"duplicadoPeek":this.pid[3][1]=n.data,this.pid[3][0]=!0;break;case"selectComboPeek":this.pid[4][1]=n.data,this.pid[4][0]=!0;break;case"insertReceta":case"insertDetalle":break;case"deleteRecipe":this.pid[7][1]="",this.pid[7][1]=!0}}plcWriteResponseHandler(e){}buildInputList(){return l(this,void 0,void 0,(function*(){for(let e=1;e<=5;e++)[2,4,5].forEach((n=>{this.recipeInputList.editable.tmg.push("c"+e+n),this.recipeInputList.editable.tmg.push("h"+e+n)}));for(let e=1;e<=17;e++)[2,4,5].forEach((n=>{this.recipeInputList.editable.balanza.push("i"+e+n)}));for(let e=1;e<=30;e++)this.recipeInputList.editable.ipsa.push("ipsa"+e);yield g(this.copsa,this,this.pid[0]),this.recipeComboBox.select()}))}enableInputs(e){this.recipeInputList.editable.tmg.forEach((n=>{document.getElementById(n).disabled=e})),this.recipeInputList.editable.balanza.forEach((n=>{document.getElementById(n).disabled=e})),this.recipeInputList.editable.ipsa.forEach((n=>{document.getElementById(n).disabled=e})),this.recipeInputList.editable.buttons.forEach((n=>{document.getElementById(n).style.color=e?"black":"blue"}))}clearInputFields(){document.getElementById("idCodeRecipe").value="";for(let e=1;e<=5;e++)for(let n=1;n<=5;n++)document.getElementById("c"+e+n).value="",document.getElementById("h"+e+n).value="";document.getElementById("sumatmg").value="";for(let e=1;e<=17;e++)for(let n=1;n<=5;n++)document.getElementById("i"+e+n).value="";document.getElementById("itmg").value="",document.getElementById("icantidad").value="",document.getElementById("iunidad").value="",document.getElementById("idescripcion").value="",document.getElementById("sumabalanza").value="";for(let e=1;e<=30;e++)document.getElementById("ipsa"+e).value=""}writeRecipeData(e){this.recipeJsonData=[[],[],[],[],[]],JSON.parse(e).forEach(((e,n)=>{this.recipeJsonData[Number(e.t_ingred)-1].push(e)})),this.clearInputFields(),e=this.recipeJsonData,this.ingredientsDOM=[[],[]],this.parametersDOM=[],document.getElementById("idCodeRecipe").value=this.recipeComboBox.domObject().value,e[0].forEach(((e,n)=>{this.ingredientsHeadArray.forEach(((r,t)=>{document.getElementById("h"+(n+1)+(t+1)).value=e[r]||""})),this.ingredientsDOM[0].push(d(`h${n+1}2`))})),e[1].forEach(((e,n)=>{this.ingredientsHeadArray.forEach(((r,t)=>{document.getElementById("c"+(n+1)+(t+1)).value=e[r]||""})),this.ingredientsDOM[0].push(d(`c${n+1}2`))})),e[2].forEach(((e,n)=>{this.ingredientsHeadArray.forEach(((r,t)=>{document.getElementById("i"+(n+1)+(t+1)).value=e[r]||""})),this.ingredientsDOM[1].push(d(`i${n+1}2`))})),d("itmg").value="Total Emulsificantes",d("iunidad").value="%",d("idescripcion").value="Emulsif. Calientes y Fríos",e[3].forEach(((e,n)=>{var r=document.getElementById("ipsa"+(n+1));""==e.n_valor?r.value="":r.value=e.n_valor,this.parametersDOM.push(document.getElementById("ipsa"+(n+1)))}));{let n=0,r=0;_((e=this).ingredientsDOM[0]),e.ingredientsDOM[0].forEach(((e,r)=>{n+=Number(e.value)})),d(e.recipeInputList.resume[0][1]).value=n.toString(),d(e.recipeInputList.resume[1][1]).value=n.toString(),_(e.ingredientsDOM[1]),e.ingredientsDOM[1].forEach(((e,n)=>{r+=Number(e.value)})),d(e.recipeInputList.resume[1][4]).value=r.toString()}for(let e=1;e<=5;e++)a[1].tmg.value[e-1]=d(`h${e}2`).value,a[1].tmg.description[e-1]=d(`h${e}4`).value,a[1].tmg.comment[e-1]=d(`h${e}5`).value;for(let e=6;e<=10;e++)a[1].tmg.value[e-1]=d(`c${e-5}2`).value,a[1].tmg.description[e-1]=d(`c${e-5}4`).value,a[1].tmg.comment[e-1]=d(`c${e-5}5`).value;for(let e=1;e<=17;e++)a[1].balanza.value[e-1]=d(`i${e}2`).value,a[1].balanza.description[e-1]=d(`i${e}4`).value,a[1].balanza.comment[e-1]=d(`i${e}5`).value;for(let e=1;e<=30;e++)a[1].parameters[e-1]=d("ipsa"+e).value;console.log(1),console.log(a)}cmdGuardarClickEvent(){var e=this.recipeComboBox.selectedIndex;if(e){_(this.ingredientsDOM[0]),_(this.ingredientsDOM[1]),_(this.parametersDOM);var n=this.recipeJsonData,r=n[0];for(let n=0;n<r.length;n++){var t=document.getElementById(`h${n+1}2`),i=document.getElementById(`h${n+1}4`),c=document.getElementById(`h${n+1}5`);t=`Use ENV_MARG; update DETALLE_RECETA set n_valor = ${t.value}, x_comen1 = '${i.value}', x_comen2 = '${c.value}' where c_receta = '${e}' and c_ingred = '${r[n].c_ingred}';`,this.sqlAgent.execute(this,t,"updateTable")}var a=n[1];for(let n=0;n<a.length;n++){var d=document.getElementById(`c${n+1}2`),o=document.getElementById(`c${n+1}4`),g=document.getElementById(`c${n+1}5`);d=`Use ENV_MARG; update DETALLE_RECETA set n_valor = ${d.value}, x_comen1 = '${o.value}', x_comen2 = '${g.value}' where c_receta = '${e}' and c_ingred = '${a[n].c_ingred}';`,this.sqlAgent.execute(this,d,"updateTable")}var l=n[2];for(let n=0;n<l.length;n++){var s=document.getElementById(`i${n+1}2`),x=document.getElementById(`i${n+1}4`),u=document.getElementById(`i${n+1}5`);s=`Use ENV_MARG; update DETALLE_RECETA set n_valor = ${s.value}, x_comen1 = '${x.value}', x_comen2 = '${u.value}' where c_receta = '${e}' and c_ingred = '${l[n].c_ingred}';`,this.sqlAgent.execute(this,s,"updateTable")}var m=n[3];for(let n=0;n<m.length;n++){var P=document.getElementById("ipsa"+(n+1));let r;P=`Use ENV_MARG; update DETALLE_RECETA set n_valor = ${r="0"==P.value?null:P.value} where c_receta = '${e}' and c_ingred = '${m[n].c_ingred}';`,this.sqlAgent.execute(this,P,"updateTable")}}else alert("No se seleccionó receta")}cmdShowTabClick(e){document.querySelectorAll(".tab-content").forEach((e=>{e.classList.remove("active")})),null!=(e=document.getElementById(e))&&e.classList.add("active")}cmdModificarClick(){this.editionDisabled=!this.editionDisabled,this.enableInputs(this.editionDisabled)}cmdActualizarClick(){this.recipeComboBox.select()}cmdGuardarClick(){this.cmdGuardarClickEvent()}cmdComoClick(){this.recipeComboBox.selectedIndex,this.ingredientsDOM[1].forEach(((e,n)=>{var r;return e=e.value,isNaN(Number(e))||""==e?(r=d(`i${n+1}1`).value,console.log(`El valor del ingrediente ${r} debe ser numérico`),!1):Number(e)<=0?(r=d(`i${n+1}1`).value,console.log(`El valor del ingrediente ${r} debe ser mayor a cero`),!1):void 0})),(this.copsa||(()=>{for(let n=1;n<=8;n++){var e=d("ipsa"+n).value;if(isNaN(Number(e))||""==e)return alert('El valor de los parámetros marcados con "*" deben ser numéricos mayor a cero'),0;if(Number(e)<=0)return alert('El valor de los parámetros marcados con "*" deben ser mayor a cero'),0}for(let e=9;e<=30;e++){var n=d("ipsa"+e).value;if(isNaN(Number(n)))return alert('El valor de los parámetros marcados con "*" deben ser numéricos mayor a cero'),0;if(Number(n)<0)return alert('El valor de los parámetros marcados con "*" deben ser mayor a cero'),0}return 1})())&&(this.formSaveAs=window.open("./public/modules/saveas.html","PopopWindow","width=600,height=240,scrollbars=no,resizable=no"))}cmdEliminarClick(){return l(this,void 0,void 0,(function*(){var e=this.recipeComboBox.domObject().value;""==e?alert("Seleccione la receta a eliminar"):confirm("¿Está seguro de eliminar la receta?")&&(this.sqlAgent.execute(this,`Use ENV_MARG; delete from DETALLE_RECETA where c_receta = '${e}';`,"deleteRecipe"),yield o(this.pid[7]),this.sqlAgent.execute(this,`Use ENV_MARG; delete from RECETA where c_receta = '${e}';`,"deleteRecipe"),console.log("Receta eliminada con éxito"),this.clearInputFields(),yield g(this.copsa,this,this.pid[0]),this.recipeComboBox.select())}))}cmdTransferirClick(){return l(this,void 0,void 0,(function*(){var e;this.formTransfer=window.open("./public/modules/tansfer.html","PopopWindow","width=600,height=240,scrollbars=no,resizable=no"),yield new Promise((e=>{var n;"complete"===(null==(n=this.formTransfer)?void 0:n.document.readyState)?e():this.formTransfer.onload=()=>e()})),(null==(e=this.formTransfer)?void 0:e.document.getElementById("lblEtiqueta")).textContent="Transferencia a Planta "+(this.copsa?"COPSA":"IPSA"),(null==(e=this.formTransfer)?void 0:e.document.getElementById("recipeCode")).value=this.recipeComboBox.domObject().options[this.recipeComboBox.domObject().selectedIndex].text,(null==(e=this.formTransfer)?void 0:e.document.getElementById("linea1")).disabled=this.copsa,(null==(e=this.formTransfer)?void 0:e.document.getElementById("linea2")).disabled=this.copsa,(null==(e=this.formTransfer)?void 0:e.document.getElementById("linea3")).disabled=this.copsa,(null==(e=this.formTransfer)?void 0:e.document.getElementById("linea4")).disabled=!this.copsa,(null==(e=this.formTransfer)?void 0:e.document.getElementById("linea5")).disabled=!this.copsa}))}cmdImprimirClick(){}cmdSalirClick(){}cmdTransferirAction(e){if(confirm(`¿Está seguro de transferir la receta seleccionada a la línea ${e}?`)){var n={action:"write",data:[{}]},r=this.recipeJsonData,t=(n.data.pop(),r[0]);for(let r=0;r<t.length;r++){var i=document.getElementById(`h${r+1}2`),c=document.getElementById(`h${r+1}4`),a=Number(t[r].c_ingred.slice(1));c={name:"L"+e.toString()+"_NOMBRE_P"+a,value:c.value},n.data.push(c),c={name:"L"+e.toString()+"P"+a,value:i.value},n.data.push(c)}var _=r[1];for(let r=0;r<_.length;r++){var d=document.getElementById(`c${r+1}2`),o=document.getElementById(`c${r+1}4`),g=Number(_[r].c_ingred.slice(1));o={name:"L"+e.toString()+"_NOMBRE_P"+g,value:o.value},n.data.push(o),o={name:"L"+e.toString()+"P"+g,value:d.value},n.data.push(o)}var l=r[2];for(let r=0;r<l.length;r++){var s=document.getElementById(`i${r+1}2`),x=document.getElementById(`i${r+1}4`),u=Number(l[r].c_ingred.slice(1));x={name:"L"+e.toString()+"_NOMBRE_P"+u,value:x.value},n.data.push(x),x={name:"L"+e.toString()+"P"+u,value:s.value},n.data.push(x)}this.plcAgent.write(this,JSON.stringify(n),"writeRecipe")}}cmdComoAction(e){return l(this,void 0,void 0,(function*(){if(""==e)alert("Ingrese el nombre de la nueva receta");else{(yield function(e,r,t,i){return n(this,void 0,void 0,(function*(){t.sqlAgent.execute(t,`Use ENV_MARG; select * from RECETA where left(c_receta, 1) = '${e?"C":"P"}' and x_receta = '${r}' order by c_receta;`,"duplicadoPeek");var n=yield o(i);return n=JSON.parse(n),!!Boolean(n[0])}))}(this.copsa,e,this,this.pid[3]))&&alert("El nombre ingresado ya existe");let c=this.copsa?"C":"P";var r=yield function(e,r,t){return n(this,void 0,void 0,(function*(){r.sqlAgent.execute(r,`Use ENV_MARG; select top(1) x_receta, c_receta from RECETA where left(c_receta, 1) = '${e?"C":"P"}' order by c_receta desc;`,"selectComboPeek");var n=yield o(t);return n=JSON.parse(n),Boolean(n[0])?(n=n[0].c_receta,Number(n.slice(1,3))+1):1}))}(this.copsa,this,this.pid[4]);r<10&&(c+="0");let a=c+r.toString();r=`Use ENV_MARG; insert into RECETA(c_receta, x_receta) values('${a}', '${e}');`,this.sqlAgent.execute(this,r,"insertReceta");let _="Use ENV_MARG; insert into DETALLE_RECETA(c_receta, c_ingred, n_valor, x_comen1, x_comen2) values ";if(this.recipeJsonData[0].forEach(((e,n)=>{e=e.c_ingred;var r=d(`h${n+1}2`).value,t=d(`h${n+1}4`).value;n=d(`h${n+1}5`).value,_+=`('${a}', '${e}', '${r}', '${t}','${n}'), `})),this.recipeJsonData[1].forEach(((e,n)=>{e=e.c_ingred;var r=d(`c${n+1}2`).value,t=d(`c${n+1}4`).value;n=d(`c${n+1}5`).value,_+=`('${a}', '${e}', '${r}', '${t}','${n}'), `})),this.recipeJsonData[2].forEach(((e,n)=>{e=e.c_ingred;var r=d(`i${n+1}2`).value,t=d(`i${n+1}4`).value;n=d(`i${n+1}5`).value,_+=`('${a}', '${e}', '${r}', '${t}','${n}'), `})),!this.copsa)for(let e=1;e<=30;e++){var t=e<10?"R0"+e:"R"+e,i=d("ipsa"+e).value;_+=`('${a}', '${t}', '${i}', '', ''), `}_=_.slice(0,-2),_+=";",this.sqlAgent.execute(this,_,"insertDetalle"),console.log("Receta guardada con éxito"),this.clearInputFields(),yield g(this.copsa,this,this.pid[0]),this.recipeComboBox.domObject().value=a,this.recipeComboBox.select()}}))}}var x=function(e,n,r,t){return new(r=r||Promise)((function(i,c){function a(e){try{d(t.next(e))}catch(e){c(e)}}function _(e){try{d(t.throw(e))}catch(e){c(e)}}function d(e){var n;e.done?i(e.value):((n=e.value)instanceof r?n:new r((function(e){e(n)}))).then(a,_)}d((t=t.apply(e,n||[])).next())}))};class u{constructor(){this.ingredientExistIndex="",this.ingredientSelectIndex="",this.ingredientJsonData=[],this.sqlAgent=new t,this.webCCSimulator=new e(this),this.copsa=!1,this.pid=[[!1,""]],this.initialize()}initialize(){return x(this,void 0,void 0,(function*(){document.getElementById("esc-title").textContent="Total ingredientes de "+(this.copsa?"COPSA":"IPSA");var e=`Use ENV_MARG; select c_ingred, x_ingred from INGREDIENTES where left(c_ingred,1)=${this.copsa?"C":"P"} order by c_ingred;`;this.sqlAgent.execute(this,e,"selectIngr"),e=yield o(this.pid[0]),this.ingredientJsonData=JSON.parse(e);let n=document.getElementById("ingr-exist");n.innerHTML="",this.ingredientJsonData.forEach(((e,r)=>{var t=document.createElement("li");t.id=e.c_ingred,t.textContent=e.x_ingred,n.appendChild(t)})),null!=(e=document.getElementById("ingr-exist"))&&e.addEventListener("click",(e=>{"LI"===(e=e.target).tagName&&(document.querySelectorAll("#ingr-exist li").forEach((e=>{e.classList.remove("li-selected")})),e.classList.add("li-selected"),this.ingredientExistIndex=e.id,document.getElementById("cmdPut").disabled=!1)})),null!=(e=document.getElementById("ingr-select"))&&e.addEventListener("click",(e=>{"LI"===(e=e.target).tagName&&(document.querySelectorAll("#ingr-select li").forEach((e=>{e.classList.remove("li-selected")})),e.classList.add("li-selected"),this.ingredientSelectIndex=e.id,document.getElementById("cmdGet").disabled=!1)}))}))}sqlQueryResponseHandler(e){var n=JSON.parse(e);switch(n.action){case"selectIngr":case"duplicadoPeekEscoger":this.pid[0][1]=n.data,this.pid[0][0]=!0}}cmdPutClick(){var e,n=document.getElementById(this.ingredientExistIndex);n.classList.remove("li-selected"),null!=(e=document.getElementById("ingr-exist"))&&e.removeChild(n),null!=(e=document.getElementById("ingr-select"))&&e.appendChild(n),document.getElementById("cmdPut").disabled=!0,this.ingredientExistIndex=""}cmdGetClick(){var e,n=document.getElementById(this.ingredientSelectIndex);n.classList.remove("li-selected"),null!=(e=document.getElementById("ingr-select"))&&e.removeChild(n),null!=(e=document.getElementById("ingr-exist"))&&e.appendChild(n),n.classList.remove("li-selected"),document.getElementById("cmdGet").disabled=!0,this.ingredientSelectIndex=""}cmdAceptarClick(){return x(this,void 0,void 0,(function*(){var e=document.getElementById("nombreNuevaReceta");e.value=e.value.trim(),""==e.value&&alert("Ingrese el nombre de la nueva receta")}))}}class m{constructor(){}loadContent(e){switch(e){case"formAbrir":E("./public/views/abrir.html").then((()=>{P=new s,window.cwcAbrir=P}));break;case"formEscoger":E("./public/views/escoger.html").then((()=>{this.formEscoger=new u}))}}}let P,v;function E(e){return function(e,n,r,t){return new(r=r||Promise)((function(n,i){function c(e){try{_(t.next(e))}catch(e){i(e)}}function a(e){try{_(t.throw(e))}catch(e){i(e)}}function _(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(c,a)}_((t=t.apply(e,[])).next())}))}(this,0,void 0,(function*(){yield fetch(e).then((e=>e.text())).then((e=>{document.getElementById("main-content").innerHTML=e})).catch((e=>console.error("Error loading the page:",e)))}))}WebCC.start((function(e){e?console.log("connected successfully"):console.log("connection failed"),E("./public/views/escoger.html").then((()=>{(v=new m).formEscoger=new u,window.manager=v}))}),{methods:{PopulateRecipes:function(e){null!=P&&P.recipeComboBox.update(e)},QueryResponse:function(e){null!=P&&P.sqlAgent.response(P,e)},PLCResponse:function(e){null!=P&&P.plcAgent.response(P,e)}},events:["NewSelection","executeQuery","writePLC"],properties:{ComboDatos:" ",ComboIndex:" "}},[],1e4),$(document).ready((function(){}))})();